/**
 * SmartImages
 * ===========
 * SmartImages provides multiple functions:
 *
 * - Loading retina images when necessary and/or possible
 * - Making image sources responsive by swapping image sources on a predefined breakpoint.
 * - Adding lazy loading to images to only load when they come near the viewport.
 * - Added option to pre-define the future image sizes so the layout will be preserved for lazy images.
 * - Implemented functionality for background images of containers.
 * - Implemented functionality of custom query and source
 *
 * @url: https://github.com/Paratron/smartimages
 * @author: Christian Engel <hello@wearekiss.com>
 * @version: 2.4.1 (20.01.2017)
 */
(function(){function t(a){x=a.matches;var b;a=document.body.scrollTop;b=a+1.5*window.innerHeight;n(a,b);p(a,b)}function u(a){var b,e;b=document.body.scrollTop;e=b+1.5*window.innerHeight;"IMG"===a.nodeName?g(a,b,e,!1,!1):m(a,b,e,!1,!1)}function y(a,b,e,D){var f=a.getAttribute("data-src"),d=a.getAttribute("data-src-2x"),g=a.getAttribute("data-src-mobile"),m=a.getAttribute("data-src-mobile-2x"),h=a.getAttribute("data-size"),q=a.getAttribute("data-size-2x"),k=a.getAttribute("data-size-mobile"),l=a.getAttribute("data-size-mobile-2x"),
n=a.getAttribute("data-src-custom"),p=a.getAttribute("data-match-custom-id"),t=a.getAttribute("data-size-custom"),u=null!==a.getAttribute("data-lazy");h&&(h=h.split("x"));q&&(q=q.split("x"));k&&(k=k.split("x"));l&&(l=l.split("x"));x?(null!==g&&(f=g,h=k),v&&(null!==m?(f=m,h=l):null!==d&&(f=d,h=q))):v&&null!==d&&(f=d,h=q);n&&p&&r[p].matches&&(f=n,h=t);return u&&(a instanceof Image?z=!0:A=!0,b+a.getBoundingClientRect().top>e)?h&&!a.getAttribute("data-dummy")?(a.setAttribute("data-dummy","1"),a=h,w.width=
a[0],w.height=a[1],w.toDataURL()):null:D?f||"":null===f?null:f}function m(a,b,e,d,f){if(null===a.getAttribute("data-smart-ignore")||d)b=y(a,b,e,f),null!==b&&(a.style.backgroundImage="url("+b+")")}function g(a,b,e,d,f){if(null===a.getAttribute("data-smart-ignore")||d)b=y(a,b,e,f),null!==b&&(a.src=b)}function n(a,b){for(var e,d,f=0;f<document.images.length;f++)e=document.images[f],e.getAttribute("data-match-custom")&&!e.getAttribute("data-match-custom-id")&&(d=Math.random().toString().split(".")[1],
e.setAttribute("data-match-custom-id",d),r[d]=window.matchMedia(e.getAttribute("data-match-custom")),r[d].addListener(function(){u(e)})),g(e,a,b,!1,!1);z&&!k&&(k=!0,window.addEventListener("scroll",function(){clearTimeout(l);l=setTimeout(n,100)}))}function p(a,b){for(var e,d=document.querySelectorAll("[data-smartImageContainer]"),f=0;f<d.length;f++){e=d[f];if(e.getAttribute("data-match-custom")&&!e.getAttribute("data-match-custom-id")){var g=Math.random().toString().split(".")[1];e.setAttribute("data-match-custom-id",
g);r[g]=window.matchMedia(e.getAttribute("data-match-custom"));r[g].addListener(function(){u(e)})}m(e,a,b,!1,!1)}A&&!k&&(k=!0,window.addEventListener("scroll",function(){clearTimeout(l);l=setTimeout(p,100)}))}var v,x,B=!1,d,l,C=!0,k=!1,z=!1,A=!1,r={};v=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.25),(min-resolution: 120dpi)").matches;d=window.c=window.c||{};d.a=d.a||"(max-width: 650px)";var w=document.createElement("canvas");d.b=function(){var a,b;B||(B=!0,a=document.body.scrollTop,b=a+
1.5*window.innerHeight,n(a,b),document.querySelectorAll&&p(a,b),a=window.matchMedia(d.a),t(a),a.addListener(t),console.log("Images are smart, now."))};d.i=function(){C=!1};d.h=function(a){a instanceof Image?g(a,0,0,!0,!1):m(a,0,0,!0,!1)};d.g=function(a){return g(a,0,0,!0,!0)};d.f=function(a){return m(a,0,0,!0,!0)};window.addEventListener("load",function(){!0===C&&d.b()})})();