/**
 * SmartImages
 * ===========
 * SmartImages provides multiple functions:
 *
 * - Loading retina images when necessary and/or possible
 * - Making image sources responsive by swapping image sources on a predefined breakpoint.
 * - Adding lazy loading to images to only load when they come near the viewport.
 * - Added option to pre-define the future image sizes so the layout will be preserved for lazy images.
 * - Implemented functionality for background images of containers.
 * - Implemented functionality of custom query and source
 *
 * @url: https://github.com/Paratron/smartimages
 * @author: Christian Engel <hello@wearekiss.com>
 * @version: 2.4.4 (30.01.2017)
 */
(function(){function q(a){y=a.matches;var b;a=document.body.scrollTop;b=a+1.5*window.innerHeight;l(a,b);m(a,b)}function r(a){var b,d;b=document.body.scrollTop;d=b+1.5*window.innerHeight;"IMG"===a.nodeName?f(a,b,d,!1,!1):k(a,b,d,!1,!1)}function z(a,b,d,E){var e=a.getAttribute("data-src"),c=a.getAttribute("data-src-2x"),f=a.getAttribute("data-src-mobile"),k=a.getAttribute("data-src-mobile-2x"),g=a.getAttribute("data-size"),n=a.getAttribute("data-size-2x"),h=a.getAttribute("data-size-mobile"),t=a.getAttribute("data-size-mobile-2x"),
l=a.getAttribute("data-src-custom"),m=a.getAttribute("data-match-custom-id"),q=a.getAttribute("data-size-custom"),r=null!==a.getAttribute("data-lazy");g&&(g=g.split("x"));n&&(n=n.split("x"));h&&(h=h.split("x"));t&&(t=t.split("x"));y?(null!==f&&(e=f,g=h),u&&(null!==k?(e=k,g=t):null!==c&&(e=c,g=n))):u&&null!==c&&(e=c,g=n);l&&m&&p[m].matches&&(e=l,g=q);return r&&("IMG"===a.tagName.toUpperCase()?v=!0:w=!0,b+a.getBoundingClientRect().top>d)?g&&!a.getAttribute("data-dummy")?(a.setAttribute("data-dummy",
"1"),a=g,x.width=a[0],x.height=a[1],x.toDataURL()):null:E?e||"":null===e?null:e}function k(a,b,d,c,e){if(null===a.getAttribute("data-smart-ignore")||c)b=z(a,b,d,e),null!==b&&(a.style.backgroundImage="url("===b.substr(0,4)?b:"url("+b+")")}function f(a,b,d,c,e){if(null===a.getAttribute("data-smart-ignore")||c)b=z(a,b,d,e),null!==b&&(a.src=b)}function l(a,b){for(var d,c,e=0;e<document.images.length;e++)d=document.images[e],d.getAttribute("data-match-custom")&&!d.getAttribute("data-match-custom-id")&&
(c=Math.random().toString().split(".")[1],d.setAttribute("data-match-custom-id",c),p[c]=window.matchMedia(d.getAttribute("data-match-custom")),p[c].addListener(function(a){r(a)}(d))),f(d,a,b,!1,!1);v&&!h&&(h=!0,window.addEventListener("scroll",A))}function m(a,b){for(var d,c=document.querySelectorAll("[data-smartImageContainer]"),e=0;e<c.length;e++){d=c[e];if(d.getAttribute("data-match-custom")&&!d.getAttribute("data-match-custom-id")){var f=Math.random().toString().split(".")[1];d.setAttribute("data-match-custom-id",
f);p[f]=window.matchMedia(d.getAttribute("data-match-custom"));p[f].addListener(function(){r(d)})}k(d,a,b,!1,!1)}w&&!h&&(h=!0,window.addEventListener("scroll",A))}function A(){clearTimeout(B);B=setTimeout(function(){var a=document.body.scrollTop,b=a+1.5*window.innerHeight;v&&l(a,b);w&&m(a,b)},100)}var u,y,C=!1,c,B,D=!0,h=!1,v=!1,w=!1,p={};u=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.25),(min-resolution: 120dpi)").matches;window.smartImages=c=window.smartImages||{};c.a=c.a||"(max-width: 650px)";
var x=document.createElement("canvas");c.init=function(){var a,b;C||(C=!0,a=document.body.scrollTop,b=a+1.5*window.innerHeight,l(a,b),document.querySelectorAll&&m(a,b),a=window.matchMedia(c.a),q(a),a.addListener(q),console.log("Images are smart, now."))};c.noAutoInit=function(){D=!1};c.manualAssign=function(a){a instanceof Image?f(a,0,0,!0,!1):k(a,0,0,!0,!1)};c.getSrc=function(a){return f(a,0,0,!0,!0)};c.getBackground=function(a){return k(a,0,0,!0,!0)};window.addEventListener("load",function(){!0===
D&&c.init()})})();