/**
 * SmartImages
 * ===========
 * SmartImages provides multiple functions:
 *
 * - Loading retina images when necessary and/or possible
 * - Making image sources responsive by swapping image sources on a predefined breakpoint.
 * - Adding lazy loading to images to only load when they come near the viewport.
 * - Added option to pre-define the future image sizes so the layout will be preserved for lazy images.
 * - Implemented functionality for background images of containers.
 * - Implemented functionality of custom query and source
 *
 * @url: https://github.com/Paratron/smartimages
 * @author: Christian Engel <hello@wearekiss.com>
 * @version: 2.4.2 (23.01.2017)
 */
(function(){function r(a){z=a.matches;var b;a=document.body.scrollTop;b=a+1.5*window.innerHeight;m(a,b);n(a,b)}function t(a){var b,e;b=document.body.scrollTop;e=b+1.5*window.innerHeight;"IMG"===a.nodeName?g(a,b,e,!1,!1):l(a,b,e,!1,!1)}function A(a,b,e,F){var f=a.getAttribute("data-src"),d=a.getAttribute("data-src-2x"),g=a.getAttribute("data-src-mobile"),l=a.getAttribute("data-src-mobile-2x"),h=a.getAttribute("data-size"),p=a.getAttribute("data-size-2x"),k=a.getAttribute("data-size-mobile"),u=a.getAttribute("data-size-mobile-2x"),
m=a.getAttribute("data-src-custom"),n=a.getAttribute("data-match-custom-id"),r=a.getAttribute("data-size-custom"),t=null!==a.getAttribute("data-lazy");h&&(h=h.split("x"));p&&(p=p.split("x"));k&&(k=k.split("x"));u&&(u=u.split("x"));z?(null!==g&&(f=g,h=k),v&&(null!==l?(f=l,h=u):null!==d&&(f=d,h=p))):v&&null!==d&&(f=d,h=p);m&&n&&q[n].matches&&(f=m,h=r);return t&&("IMG"===a.tagName.toUpperCase()?w=!0:x=!0,b+a.getBoundingClientRect().top>e)?h&&!a.getAttribute("data-dummy")?(a.setAttribute("data-dummy",
"1"),a=h,y.width=a[0],y.height=a[1],y.toDataURL()):null:F?f||"":null===f?null:f}function l(a,b,e,d,f){if(null===a.getAttribute("data-smart-ignore")||d)b=A(a,b,e,f),null!==b&&(a.style.backgroundImage="url("+b+")")}function g(a,b,e,d,f){if(null===a.getAttribute("data-smart-ignore")||d)b=A(a,b,e,f),null!==b&&(a.src=b)}function m(a,b){for(var e,d,f=0;f<document.images.length;f++)e=document.images[f],e.getAttribute("data-match-custom")&&!e.getAttribute("data-match-custom-id")&&(d=Math.random().toString().split(".")[1],
e.setAttribute("data-match-custom-id",d),q[d]=window.matchMedia(e.getAttribute("data-match-custom")),q[d].addListener(function(a){t(a)}(e))),g(e,a,b,!1,!1);w&&!k&&(k=!0,window.addEventListener("scroll",B))}function n(a,b){for(var e,d=document.querySelectorAll("[data-smartImageContainer]"),f=0;f<d.length;f++){e=d[f];if(e.getAttribute("data-match-custom")&&!e.getAttribute("data-match-custom-id")){var g=Math.random().toString().split(".")[1];e.setAttribute("data-match-custom-id",g);q[g]=window.matchMedia(e.getAttribute("data-match-custom"));
q[g].addListener(function(){t(e)})}l(e,a,b,!1,!1)}x&&!k&&(k=!0,window.addEventListener("scroll",B))}function B(){clearTimeout(C);C=setTimeout(function(){var a=document.body.scrollTop,b=a+1.5*window.innerHeight;w&&m(a,b);x&&n(a,b)},100)}var v,z,D=!1,d,C,E=!0,k=!1,w=!1,x=!1,q={};v=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.25),(min-resolution: 120dpi)").matches;d=window.c=window.c||{};d.a=d.a||"(max-width: 650px)";var y=document.createElement("canvas");d.b=function(){var a,b;D||(D=!0,a=document.body.scrollTop,
b=a+1.5*window.innerHeight,m(a,b),document.querySelectorAll&&n(a,b),a=window.matchMedia(d.a),r(a),a.addListener(r),console.log("Images are smart, now."))};d.i=function(){E=!1};d.h=function(a){a instanceof Image?g(a,0,0,!0,!1):l(a,0,0,!0,!1)};d.g=function(a){return g(a,0,0,!0,!0)};d.f=function(a){return l(a,0,0,!0,!0)};window.addEventListener("load",function(){!0===E&&d.b()})})();